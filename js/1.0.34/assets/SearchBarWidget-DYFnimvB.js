import{j as r,r as a}from"./index-CossuYGe.js";import{Q as y,f as C,g as x,O as E,h as b}from"./storyArgs-D6apI4ht.js";import{E as v}from"./combo_box-DGiaNyzT.js";function j(t){const{api:n,query:l,selectionChangedEvent:u,...O}=t,d=new E(n),[h,p]=a.useState(),[s,i]=a.useState([]),[o,g]=a.useState(l),m=e=>{i(e)},S=e=>{if(!e.trim().toLowerCase())return;i([{label:e}])},{isLoading:f}=b(["suggestions",o],async()=>{if(o.trim())return d.suggest({query:o},void 0,void 0,t.parameter).then(e=>{e.response&&e.response.docs&&p(e.response.docs.map(c=>({label:c.autosuggest,type:{color:"tint1",iconType:""}})))})});return a.useEffect(()=>{u(s.map(e=>({label:e.label})))},[s]),r.jsx("div",{"data-testid":"search-bar",children:r.jsx(v,{id:"suggest",isClearable:!0,"aria-label":"searchBar",fullWidth:!0,async:!0,placeholder:"Search",singleSelection:!0,isLoading:f,options:h,selectedOptions:s,onChange:m,onCreateOption:S,onSearchChange:e=>{g(e)}})})}function Q(t){const n=new y;return r.jsx(C,{colorMode:"light",children:r.jsx(x,{client:n,children:r.jsx(j,{api:t.api,query:t.query,selectionChangedEvent:t.selectionChangedEvent,parameter:t.parameter})})})}export{j as S,Q as W};
