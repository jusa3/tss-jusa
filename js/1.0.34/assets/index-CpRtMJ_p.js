import{r as N,j as e,c as v}from"./index-CossuYGe.js";import{x as E,V as m,Q as w,f as I,g as _,O as k,h as A,y as C,R as S,aq as W}from"./storyArgs-D6apI4ht.js";/* empty css                                   */const x=5;function B(t){const[i,o]=N.useState(!1),r=t.className||"ts4nfdi-entity-onto-list-style";function a(s){return e.jsx("button",{onClick:()=>{t.onNavigateToOntology&&t.onNavigateToOntology(s,t.entityType||"",{iri:t.iri,label:t.label})},children:e.jsx("span",{className:"ontology-badge",children:s.toUpperCase()})},m())}function d(){return t.ontolist.length>x&&!i?e.jsxs(e.Fragment,{children:[t.ontolist.slice(0,x).map(s=>e.jsxs("span",{children:[a(s)," "]},m())),e.jsxs("button",{className:"expand-onto-list",onClick:()=>o(!0),children:["+ ",t.ontolist.length-x]})]}):t.ontolist.map(s=>e.jsxs("span",{children:[a(s)," "]},m()))}return e.jsx("div",{className:r,children:t.ontolist&&t.ontolist.length>0&&e.jsxs(E,{style:{fontWeight:"normal"},children:["Also appears in ",d()]})})}function M(t){const{iri:i,api:o,parameter:r,entityType:a,ontologyId:d,useLegacy:s,className:T}=t,O=new k(o),{data:c,isLoading:b,isSuccess:h,isError:p,error:L}=A(["entityOntoList",o,r,a,i,d,s],async()=>{let y,g,u;if(s){const n=(await O.getEntityResponse(i,a,void 0,r,s))._embedded,f=n[Object.keys(n)[0]].filter(l=>l.is_defining_ontology).map(l=>l.ontology_name);y=n[Object.keys(n)[0]].map(l=>l.ontology_name).filter(l=>!f.includes(l)),g=a||W(Object.keys(n)[0]),u=n[Object.keys(n)[0]][0].label}else{const n=await O.getEntityObject(i,a,d,r,s);y=n.getAppearsIn().filter(f=>!n.getDefinedBy().includes(f)),g=a||n.getType(),u=n.getLabel()||""}return y=y.filter(n=>n!=d).sort(),{ontoList:y,entityType:g,label:u}});return e.jsxs("div",{"data-testid":"entity-onto-list",children:[h&&c&&e.jsx(B,{ontolist:c.ontoList,entityType:c.entityType,label:c.label,iri:i,onNavigateToOntology:t.onNavigateToOntology,className:T}),b&&e.jsx(C,{}),p&&e.jsx(E,{children:S(L,"ontology list")})]})}function P(t){const i=new w;return e.jsx(I,{colorMode:"light",globalStyles:!1,children:e.jsx(_,{client:i,children:e.jsx(M,{iri:t.iri,api:t.api,ontologyId:t.ontologyId,entityType:t.entityType,parameter:t.parameter,useLegacy:t.useLegacy,onNavigateToOntology:t.onNavigateToOntology})})})}const j=new WeakMap;function Q(t,i){let o=j.get(i);o||(o=v.createRoot(i),j.set(i,o)),o.render(e.jsx(P,{...t}))}window.ts4nfdiWidgets={...window.ts4nfdiWidgets,createEntityOntoList:Q};export{B as E,Q as c};
