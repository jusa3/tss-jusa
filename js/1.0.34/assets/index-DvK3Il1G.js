import{r as v,j as t,c as p}from"./index-CossuYGe.js";import{x as b,V as u,Q as L,f as w,g as D,O as B,h as I,y as C,R as S,aq as W}from"./storyArgs-D6apI4ht.js";/* empty css                                    */const x=5;function _(e){const[n,s]=v.useState(!1),l=e.className||"ts4nfdi-entity-defined-by-style";function a(i){return t.jsx("button",{onClick:()=>{e.onNavigateToOntology&&e.onNavigateToOntology(i,e.entityType||"",{iri:e.iri,label:e.label})},children:t.jsx("span",{className:"ontology-badge",children:i.toUpperCase()})},u())}function y(){return e.ontolist.length>x&&!n?t.jsxs(t.Fragment,{children:[e.ontolist.slice(0,x).map(i=>t.jsxs("span",{children:[a(i)," "]},u())),t.jsxs("button",{className:"expand-onto-list",onClick:()=>s(!0),children:["+ ",e.ontolist.length-x]})]}):e.ontolist.map(i=>t.jsxs("span",{children:[a(i)," "]},u()))}return t.jsx("div",{className:l,children:e.ontolist&&e.ontolist.length>0&&t.jsxs(b,{style:{fontWeight:"normal"},children:["Defined by ",y()]})})}function k(e){const{iri:n,api:s,parameter:l,entityType:a,ontologyId:y,useLegacy:i,className:E}=e,m=new B(s),{data:c,isLoading:O,isSuccess:T,isError:h,error:N}=I(["entityDefinedBy",s,l,a,n,y,i],async()=>{let r,g,f;if(i){const o=(await m.getEntityResponse(n,a,void 0,l,i))._embedded;r=o[Object.keys(o)[0]].filter(d=>d.is_defining_ontology).map(d=>d.ontology_name),g=a||W(Object.keys(o)[0]),f=o[Object.keys(o)[0]][0].label}else{const o=await m.getEntityObject(n,a,y,l,i);r=o.getDefinedBy().filter(d=>d!=o.getOntologyId()),g=a||o.getType(),f=o.getLabel()||""}return r=r.sort(),{ontoList:r,entityType:g,label:f}});return t.jsxs("div",{"data-testid":"entity-defined-by",children:[T&&c&&t.jsx(_,{ontolist:c.ontoList,entityType:c.entityType,label:c.label,iri:n,onNavigateToOntology:e.onNavigateToOntology,className:E}),O&&t.jsx(C,{}),h&&t.jsx(b,{children:S(N,"ontology list")})]})}function A(e){const n=new L;return t.jsx(w,{colorMode:"light",globalStyles:!1,children:t.jsx(D,{client:n,children:t.jsx(k,{iri:e.iri,api:e.api,ontologyId:e.ontologyId,entityType:e.entityType,parameter:e.parameter,useLegacy:e.useLegacy,onNavigateToOntology:e.onNavigateToOntology})})})}const j=new WeakMap;function M(e,n){let s=j.get(n);s||(s=p.createRoot(n),j.set(n,s)),s.render(t.jsx(A,{...e}))}window.ts4nfdiWidgets={...window.ts4nfdiWidgets,createEntityDefinedBy:M};export{_ as E,M as c};
