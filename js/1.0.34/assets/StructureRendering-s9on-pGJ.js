import{j as l}from"./index-CossuYGe.js";import{aV as M,V as x,d as V,aL as U,Y as j}from"./storyArgs-D6apI4ht.js";import{E as z}from"./icon_tip-DknG74Nq.js";const F=!0;function W(r){return l.jsx(z,{type:"iInCircle",color:"subdued",content:r})}function Q(r,c){const e=Object.keys(c).map(t=>{const s=r.getLinkedEntities().getLabelForIri(t)||t;return s?"*"+c[t]+" ("+s+")":""}).join(`
`);return W(e)}function T(r,c,e,t=F,s){const n=c.getLabelForIri(e)||e.split("/").pop()||e,m=c.get(e),d=r.getOntologyId();if(r.getType()!=="ontology"&&e===(r==null?void 0:r.getIri()))return l.jsx("span",{className:"highlight",children:r.getLabel()});if(!m)return e.startsWith("http")?l.jsx("a",{className:"clickable",href:e,children:n}):l.jsx("span",{children:n});const h=m.definedBy?m.definedBy.filter(a=>a!==d):[],o=m.type?M(m.type):r.getType();return h.length===1?m.hasLocalDefinition?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"clickable",onClick:()=>{s.onNavigateToEntity&&s.onNavigateToEntity(d,o,{iri:e,label:n})},children:n}),t?l.jsxs(l.Fragment,{children:[" ",l.jsx("button",{className:"no-decoration",onClick:()=>{s.onNavigateToOntology&&s.onNavigateToOntology(h[0],o,{iri:e,label:n})},children:l.jsx("span",{className:"ontology-badge",children:h[0].toUpperCase()})})]}):l.jsx(l.Fragment,{})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"clickable",onClick:()=>{s.onNavigateToEntity&&s.onNavigateToEntity(h[0],o,{iri:e,label:n})},children:n}),t?l.jsxs(l.Fragment,{children:[" ",l.jsx("button",{className:"no-decoration",onClick:()=>{s.onNavigateToOntology&&s.onNavigateToOntology(h[0],o,{iri:e,label:n})},children:l.jsx("span",{className:"ontology-badge",children:h[0].toUpperCase()})})]}):l.jsx(l.Fragment,{})]}):h.length>1?m.hasLocalDefinition?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"clickable",onClick:()=>{s.onNavigateToEntity&&s.onNavigateToEntity(d,o,{iri:e,label:n})},children:n}),t?l.jsxs(l.Fragment,{children:[" ",h.map(a=>l.jsx("button",{className:"no-decoration",onClick:()=>{s.onNavigateToOntology&&s.onNavigateToOntology(a,o,{iri:e,label:n})},children:l.jsx("span",{className:"ontology-badge",children:a.toUpperCase()})},x()))]}):l.jsx(l.Fragment,{})]}):l.jsxs(l.Fragment,{children:[l.jsx("a",{className:"clickable",href:e,children:n}),t?l.jsxs(l.Fragment,{children:[" ",l.jsx("button",{className:"no-decoration",onClick:()=>{s.onNavigateToDisambiguate&&s.onNavigateToDisambiguate(o,{iri:e,label:n})},children:l.jsxs("span",{className:"ontology-badge",children:[l.jsx(V,{type:"search",size:"s"})," ",h.length," ","ontologies"]})},x())]}):l.jsx(l.Fragment,{})]}):m.hasLocalDefinition?l.jsx(l.Fragment,{children:l.jsx("button",{className:"clickable",onClick:()=>{s.onNavigateToEntity&&s.onNavigateToEntity(d,o,{iri:e,label:n})},children:n})}):parseInt(m.numAppearsIn)>0?l.jsxs(l.Fragment,{children:[l.jsx("a",{className:"clickable",href:e,children:n}),t?l.jsxs(l.Fragment,{children:[" ",l.jsx("button",{className:"no-decoration",onClick:()=>{s.onNavigateToDisambiguate&&s.onNavigateToDisambiguate(o,{iri:e,label:n})},children:l.jsxs("span",{className:"ontology-badge",children:[l.jsx(V,{type:"search",size:"s"})," ",m.numAppearsIn," ",parseInt(m.numAppearsIn)>1?"ontologies":"ontology"]})},x())]}):l.jsx(l.Fragment,{})]}):l.jsx(l.Fragment,{children:l.jsx("a",{className:"clickable",href:m.url||e,children:n})})}function f(r,c,e,t=F,s){let n=l.jsx(l.Fragment,{});if(c=c.mergeWith(e.linkedEntities),typeof e=="string")n=T(r,c,e,t,s);else if(typeof e=="object"&&!Array.isArray(e)&&Array.isArray(e.type)&&e.type.indexOf("reification")!==-1)n=_(r,U.fromJson(e)[0],t,s);else{const m=e["http://www.w3.org/2002/07/owl#someValuesFrom"],d=e["http://www.w3.org/2002/07/owl#allValuesFrom"],h=j(e["http://www.w3.org/2002/07/owl#intersectionOf"]),o=j(e["http://www.w3.org/2002/07/owl#unionOf"]),a=e["http://www.w3.org/2002/07/owl#hasValue"],g=e["http://www.w3.org/2002/07/owl#minCardinality"]||e["http://www.w3.org/2002/07/owl#minQualifiedCardinality"],p=e["http://www.w3.org/2002/07/owl#maxCardinality"]||e["http://www.w3.org/2002/07/owl#maxQualifiedCardinality"],O=e["http://www.w3.org/2002/07/owl#cardinality"]||e["http://www.w3.org/2002/07/owl#qualifiedCardinality"],S=e["http://www.w3.org/2002/07/owl#hasSelf"],C=e["http://www.w3.org/2002/07/owl#complementOf"],L=j(e["http://www.w3.org/2002/07/owl#oneOf"]),I=e["http://www.w3.org/2002/07/owl#inverseOf"],w=e["http://www.w3.org/2002/07/owl#onProperty"],k=e["http://www.w3.org/2002/07/owl#onDatatype"];if(k){const i=[f(r,c,k,t,s)],u=j(e["http://www.w3.org/2002/07/owl#withRestrictions"]);if(u.length>0){i.push(l.jsx(l.Fragment,{children:"["}));let y=!0;for(const b of u){y?y=!1:i.push(l.jsx(l.Fragment,{children:", "}));const A=b["http://www.w3.org/2001/XMLSchema#minExclusive"],D=b["http://www.w3.org/2001/XMLSchema#minInclusive"],X=b["http://www.w3.org/2001/XMLSchema#maxExclusive"],J=b["http://www.w3.org/2001/XMLSchema#maxInclusive"];A?i.push(l.jsxs(l.Fragment,{children:["> ",A]})):D?i.push(l.jsxs(l.Fragment,{children:["≥ ",D]})):X?i.push(l.jsxs(l.Fragment,{children:["< ",X]})):J&&i.push(l.jsxs(l.Fragment,{children:["≤ ",J]}))}i.push(l.jsx(l.Fragment,{children:"]"}))}n=l.jsx(l.Fragment,{children:i.map(y=>l.jsx("span",{children:y},x()))})}else if(m)n=l.jsxs(l.Fragment,{children:[f(r,c,w,t,s),l.jsx("i",{style:{color:"purple"},children:" some "}),f(r,c,j(m)[0],t,s)]});else if(d)n=l.jsxs(l.Fragment,{children:[f(r,c,w,t,s),l.jsx("i",{style:{color:"purple"},children:" only "}),f(r,c,j(d)[0],t,s)]});else if(h.length>0){const i=[l.jsx("span",{className:"text-neutral-default",children:"("},x())];for(const u of h)i.length>1&&i.push(l.jsx("i",{children:" and "})),i.push(f(r,c,u,t,s));i.push(l.jsx("span",{className:"text-neutral-default",children:")"})),n=l.jsx("span",{children:i.map(u=>l.jsx("span",{children:u},x()))})}else if(o.length>0){const i=[l.jsx("span",{className:"text-neutral-default",children:"("},x())];for(const u of o)i.length>1&&i.push(l.jsx("i",{children:" or "})),i.push(f(r,c,u,t,s));i.push(l.jsx("span",{className:"text-neutral-default",children:")"})),n=l.jsx("span",{children:i.map(u=>l.jsx("span",{children:u},x()))})}else if(a)n=l.jsxs(l.Fragment,{children:[f(r,c,w,t,s),l.jsx("i",{style:{color:"purple"},children:" value "}),f(r,c,j(a)[0],t,s)]});else if(g)n=l.jsxs(l.Fragment,{children:[f(r,c,w,t,s),l.jsx("i",{style:{color:"purple"},children:" min "}),f(r,c,j(g)[0],t,s)]});else if(p)n=l.jsxs(l.Fragment,{children:[f(r,c,w,t,s),l.jsx("i",{style:{color:"purple"},children:" max "}),f(r,c,j(p)[0],t,s)]});else if(O)n=l.jsxs(l.Fragment,{children:[f(r,c,w,t,s),l.jsx("i",{style:{color:"purple"},children:" exactly "}),f(r,c,j(O)[0],t,s)]});else if(S)n=l.jsxs(l.Fragment,{children:[f(r,c,w,t,s),l.jsx("i",{style:{color:"purple"},children:" Self "}),f(r,c,j(S)[0],t,s)]});else if(C)n=l.jsxs(l.Fragment,{children:[l.jsx("i",{children:"not "}),f(r,c,j(C)[0],t,s)]});else if(L.length>0){const i=[l.jsx("span",{className:"text-neutral-default",children:"{"},x())];for(const u of L)i.length>1&&i.push(l.jsx("span",{className:"text-neutral-default",children:", "},x())),i.push(f(r,c,u,t,s));i.push(l.jsx("span",{className:"text-neutral-default",children:"}"})),n=l.jsx("span",{children:i.map(u=>l.jsx("span",{children:u},x()))})}else I&&(n=l.jsxs(l.Fragment,{children:[l.jsx("i",{style:{color:"purple"},children:"inverse "}),l.jsx("span",{className:"text-neutral-default",children:"("},x()),f(r,c,I,t,s),l.jsx("span",{className:"text-neutral-default",children:")"},x())]}))}return n}function Y(r,c,e,t=F,s){return l.jsx(l.Fragment,{children:e.length===1?l.jsx("p",{children:f(r,r.getLinkedEntities(),e[0],t,s)}):l.jsx("ul",{children:e.map(n=>l.jsx("li",{children:f(r,r.getLinkedEntities(),n,t,s)},x()))})})}function N(r,c,e,t=F,s){const n=[];if(e)for(const o of Object.keys(e.linkedEntities))for(let a=c.indexOf(o,0);a!==-1;a=c.indexOf(o,a))n.push({start:a,end:a+o.length,link:T(r,e,o,t,s)}),a+=o.length;const m=/[A-z]+:\/\/[^\s]+/g;for(let o=m.exec(c);o;o=m.exec(c)){const a=o[0];n.push({start:o.index,end:o.index+a.length,link:l.jsx("span",{children:l.jsx("a",{className:"clickable",href:a,children:a})},x())})}n.sort((o,a)=>o.start-a.start);l:for(let o=0;o<n.length;){for(let a=o+1;a<n.length;++a){const g=n[o],p=n[a];if(g!==p&&g.end>=p.start&&p.end>=g.start){g.end-g.start<p.end-p.start?n.splice(o,1):n.splice(a,1);continue l}}++o}if(n.length===0)return l.jsx(l.Fragment,{children:c});const d=[];let h=0;for(const o of n)d.push(l.jsx("span",{children:c.substring(h,o.start)},x())),d.push(o.link),h=o.end;return d.push(l.jsx("span",{children:c.slice(h)},x())),l.jsx(l.Fragment,{children:d})}function _(r,c,e=F,t){function s(n){const m=r.getLinkedEntities();return Object.keys(m.linkedEntities).length==0?typeof n.value=="string"?N(r,n.value.toString(),void 0,e,t):l.jsx(l.Fragment,{children:JSON.stringify(n.value)}):m.get(n.value)?T(r,m,n.value,e,t):typeof n.value!="string"?r.getType()=="ontology"?l.jsx(l.Fragment,{children:JSON.stringify(n.value)}):f(r,m,n.value,e,t):N(r,n.value.toString(),m,e,t)}return l.jsxs(l.Fragment,{children:[s(c)," ",c.hasMetadata()&&Q(r,c.getMetadata())]})}export{T as a,f as b,W as c,Y as d,_ as g};
